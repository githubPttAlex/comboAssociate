!function(o){o.fn.comboAssociate=function(e){if(void 0===e)return alert("Error: comboAssociate initializing error: no settings"),!1;var n=o.extend({debug:!1,data:{},url:null,chooseOption:!1,chooseOptionValue:"0",chooseOptionText:"Choose an option...",empty:!0,dataType:"json",type:"POST",onChange:function(){return console.log("comboAssociate - default onChange function"),!0},beforeFunction:function(){return console.log("comboAssociate - default beforeFunction"),!0},afterFunction:function(){return console.log("comboAssociate - default afterFunction"),!0}},e),t=!0;!1===n.debug&&(t=!1),t&&(console.log("Creating comboAssociate..."),console.log("comboAssociate - settings:"),console.log(n));var c=[];if(this.each(function(o,e){c.push(e),t&&console.log("comboAssociate - plugin will try to attach element:"+o+" - "+e)}),void 0===c||0==c.length)return console.log("Error: comboAssociate initializing error: no targeting elements found"),!1;for(t&&console.log("comboAssociate - plugin will try to attach :"+c.length+" elements"),index=0;index<c.length;index++){var i=c[index];a(i,n.beforeFunction,"userBefore").then(function(o){return a(o,s,"executeFunction")}).done(function(o){a(o,n.afterFunction,"userAfter")})}function s(e){t&&console.log("comboAssociate - comboAssociateSingleFunction:"+e);var c,s=[],l={},r=n.url,u=n.chooseOption,g=n.chooseOptionValue,f=n.chooseOptionText,d=n.dataType,m=n.type,p={};if("undefined"!==(c=void 0===n.data?"undefined":n.data))for(var h in c)p[h]=c[h];if(t&&(console.log("comboAssociate - taking ajax data..."),console.log("comboAssociate - data:"),console.log(p)),null!=r){var b=function(e){if(!(e=o.extend(!0,{type:"POST",data:{},dataType:"json"},e)).url)return!1;return o.ajax(e)}({type:m,url:r,dataType:d,data:p});s.push(b)}l.caFunctionSingle=function(e,c){var i;t&&(console.log("comboAssociate - taking functions on "+e),console.log("comboAssociate - response:"),console.log(c)),!0!==n.empty&&(i=o(e).html());var s="";u&&(s+='<option value="'+g+'" selected>'+f+"</option>"),o.each(c,function(o,e){s+='<option value="'+o+'" >'+e+"</option>"}),o(e).html(i+s)},o.when.apply(o,s).done(function(){var o,n;t&&(console.log("comboAssociate - Done()"),console.log("comboAssociate - Done() arguments:"),console.log(arguments)),o=arguments,n=e,l.caFunctionSingle(n,o[0])}).fail(function(){t&&(console.log("comboAssociate - Fail()"),console.log("comboAssociate - Fail() arguments:"),console.log(arguments))}),o(e).on("change",function(){return t&&(console.log("comboAssociate - "+i+" Change()"),console.log(arguments)),a(null,n.onChange," Change()")})}function a(e,n,c){t&&(console.log("comboAssociate - executeFunction:"+c),console.log("comboAssociate - elem:"+e));var i=o.Deferred();try{"function"==typeof n&&(n(e),i.resolve(e))}catch(o){i.reject(o)}return i.promise()}return this}}(jQuery);