/*** comboAssociate v1.0 - jQuery Plugin * Developed by githubPttAlex - (2018)*/
!function(o){o.fn.comboAssociate=function(e){if(void 0===e)return alert("Error: comboAssociate initializing error: no settings"),!1;var n=o.extend({debug:!1,data:{},url:null,chooseOption:!1,chooseOptionValue:"0",chooseOptionText:"Choose an option...",empty:!0,dataType:"json",type:"POST",class:null,onChange:function(){return console.log("comboAssociate - default onChange function"),!0},beforeFunction:function(){return console.log("comboAssociate - default beforeFunction"),!0},afterFunction:function(){return console.log("comboAssociate - default afterFunction"),!0}},e),t=!0;!1===n.debug&&(t=!1),t&&(console.log("Creating comboAssociate..."),console.log("comboAssociate - settings:"),console.log(n));var c=[];if(this.each(function(o,e){c.push(e),t&&console.log("comboAssociate - plugin will try to attach element:"+o+" - "+e)}),void 0===c||0==c.length)return console.log("Error: comboAssociate initializing error: no targeting elements found"),!1;for(t&&console.log("comboAssociate - plugin will try to attach :"+c.length+" elements"),index=0;index<c.length;index++){var s=c[index];i(s,n.beforeFunction,"userBefore").then(function(o){return i(o,a,"executeFunction")}).done(function(o){i(o,n.afterFunction,"userAfter")})}function a(e){t&&console.log("comboAssociate - comboAssociateSingleFunction:"+e);var c,a=[],l={},r=n.url,u=n.chooseOption,g=n.chooseOptionValue,f=n.chooseOptionText,m=n.dataType,d=n.type,p=n.class,b={};if("undefined"!==(c=void 0===n.data?"undefined":n.data))for(var h in c)b[h]=c[h];if(t&&(console.log("comboAssociate - taking ajax data..."),console.log("comboAssociate - data:"),console.log(b)),null!==r){var A=function(e){if(!(e=o.extend(!0,{type:"POST",data:{},dataType:"json"},e)).url)return!1;return o.ajax(e)}({type:d,url:r,dataType:m,data:b});a.push(A)}if(null!==p){var v=" "+p;e.className+=v,t&&(console.log("comboAssociate - adding custom css..."),console.log("comboAssociate - class:"+v))}l.populateComboAssociate=function(e,c){var s;t&&(console.log("comboAssociate - taking functions on "+e),console.log("comboAssociate - response:"),console.log(c)),!0!==n.empty&&(s=o(e).html());var a="";u&&(a+='<option value="'+g+'" selected>'+f+"</option>"),o.each(c,function(o,e){a+='<option value="'+o+'" >'+e+"</option>"}),o(e).html(s+a)},o.when.apply(o,a).done(function(){var o,n;t&&(console.log("comboAssociate - Done()"),console.log("comboAssociate - Done() arguments:"),console.log(arguments)),o=e,n=arguments,l.populateComboAssociate(o,n[0])}).fail(function(){t&&(console.log("comboAssociate - Fail()"),console.log("comboAssociate - Fail() arguments:"),console.log(arguments))}),o(e).on("change",function(){return t&&(console.log("comboAssociate - "+s+" Change()"),console.log(arguments)),i(null,n.onChange," Change()")})}function i(e,n,c){t&&(console.log("comboAssociate - executeCallFunction:"+c),console.log("comboAssociate - elem:"+e));var s=o.Deferred();try{"function"==typeof n&&(n(e),s.resolve(e))}catch(o){s.reject(o)}return s.promise()}return this}}(jQuery);